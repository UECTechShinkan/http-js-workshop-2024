# JavaScriptの環境構築と基礎

さて、ここまででWebの原理を駆け足ながら学びました。ここからは、次回の講習でJavaScriptを使ってHTTP APIを作成するために必要な環境構築と基礎知識を学びます。

## ところでプログラミングとは？

プログラミングとは、コンピュータに対して指示を出すことです。
コンピュータはあくまでも人間より高速に計算を行うだけで、自分で考えたり判断したりすることはできません。

プログラミングを通して、コンピュータにどのような処理を行わせるかを指示することができます。たとえば、計算をしたり、実験のデータを分析したり、ゲームを作ったり、たくさんのことができます。

### プログラミングにおいて大事なこと

1. **正確性** : コンピュータは人間よりもはるかに高速に計算を行いますが、間違った指示を出すと間違った結果を出力します。

2. **構文** : プログラミング言語にはそれぞれ文法があります。正しい文法で書かないと、コンピュータは指示を解釈できません。

3. **順序** : プログラムは上から順に実行されます。順序を間違えると、思った通りの結果が得られないことがあります。

## JavaScriptとは

プログラミング言語の一種です。
最初はブラウザで実行しWebサイトを動的に制御するために開発されました。
しかし、Node.jsなどの登場によりサーバー側でも使われるようになり、Webサーバーを書いたりコマンドラインツールを書いたりすることができるようになりました。

このページでは、Node.jsを使ってJavaScriptを実行する方法を説明します。
また、簡単にJavaScriptを触ってみる演習も行います。

> [!NOTE]
> この講習では、Webサイト作成においてJavaScriptを活用する方法には触れません。

## 演習

### 準備: Node.jsのインストール

[Node.jsのインストール](./a1_nodejs.md)を参考にして、Node.jsをインストールしてください。

### Node.jsの実行(REPL)

Node.jsにはREPL(Read-Eval-Print Loop)という対話型の実行環境があります。
これを使って、JavaScriptのコードを実行してみましょう。

REPLを起動するには、ターミナルを開いて、`node`と入力します。<br>
下のような表示が出れば成功です。

```bash
$ node
Welcome to Node.js v20.14.0
Type ".help" for more information.
>
```

### Hello,World

REPLでJavaScriptのコードを実行してみましょう。
まずは、ターミナルに文字を表示するプログラムを書いてみます。

先程のようにREPLを起動し、`console.log("Hello World!")` と入力し、Enterキーを押してください。<br>

```bash
Hello, World!
undefined
```

のような表示が出たら成功です。

### 四則演算

次に、四則演算をしてみましょう。

JavaScriptにおける四則演算子は次のようになっています。

- `+` : 足し算
- `-` : 引き算
- `*` : 掛け算
- `/` : 割り算
- `%` : 割り算の余り

先ほどのようにREPLを起動し、`1+2`と入力してEnterキーを押してください。<br>
多分、`3`と表示されるはずです。

他にも、`1-2`、`1*2`、`1/2`なども試してみてください。

> [!TIP]
> `4/3`などの答えが整数にならないものを計算するとどうなるでしょうか？

また、複数の演算子を組み合わせた計算もできます。<br>
例: `3*2 + 1` => 7

### 変数

次に、変数を使ってみましょう。
変数とは、データを保存するための箱のようなものです。
例えば計算の結果や特定の文字列など、後から参照したり計算に使ったりするものに名前をつけて保存しておくことができます。

変数は次のような文法で宣言することで、**宣言よりも後ろの処理で使うことができます**。

```javascript
let tax; // 宣言
tax = 1.1; // 代入
```

```javascript
let tax = 1.1; // 宣言、代入を同時に行うこともできる
```

この例では、`tax`という変数に`1.1`という値を代入しています。
よって、`tax`という変数を使って計算をすることができます。

> [!NOTE]
> このときの`左辺 = 右辺`は、左辺に右辺の値を入れるという意味を指しています。
> 例えば次のようなコードは、「xにxより1大きい数を代入する」という意味なので、
> 結果としてｘが1大きくなります。
>
> ```js
> let x = 1;
> x = x + 1;
> console.log("x: ", x) // x: 2
> ```

例えば、税抜き価格が`100`の商品の税込み価格を計算する場合、次のように書くことができます。

> [!TIP]
> REPLでは1行ずつ貼り付け / 入力して実行してください。

```javascript
let price = 100;
let tax = 1.1;
let priceWithTax = price * tax;
console.log(priceWithTax);
```

では、税率が10%から8%に変わった場合、どうなるでしょうか？

```javascript
let tax = 1.08;
```

こうするだけで正しい計算結果が得られます。

この税率のように、「意味のあるデータ」を変数に保存しておくことで、プログラムを読みやすくすることができます。

### const と let

実は、JavaScriptは変数の宣言方法が2つあります。

`let`を用いた宣言は先程紹介しましたが、`const`を用いた宣言もあります。

letとconstの違いを形式的に説明するとこんな感じです。

- let: 再代入できる。
- const: 再代入できない。

先程の税率計算をする例で説明すると、

```js
let tax = 1.1;
```

のように、letを使って税率を指定しています。

**letは再代入できる**ので、下のように勝手に税率を変えてもまったく問題ありません。

```js
let tax = 1.1;
let price1 = 100;
console.log(price1 * tax); // 110
tax = 1.05; // ここで勝手に税率を変更する
console.log(price1 * tax); // 105
```

**でも、勝手に税率が変わったら困りますよね？**

ということで、税率`tax`をconstを使って宣言します。

```js
const tax = 1.1;
let price1 = 100;
console.log(price1 * tax); // 110
tax = 1.05;
```

`tax`の値を変更するときに`Uncaught TypeError: Assignment to constant variable.`というエラーが出るはずです。

このように、constを使って変数を宣言することで、値を変更できない変数を作ることができます。

> [!TIP]
> 昔は`var`という方法で変数を宣言することができましたが、今は基本的に使うことが推奨されません。
